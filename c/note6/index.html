<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第六章 自定数据类型 | wfmiss Notes</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="我们在黑暗中并肩前行，走在各自的朝圣路上!">
    <meta name="keywords" content="wfmiss,eric">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.6c3cad56.css" as="style"><link rel="preload" href="/assets/js/app.f3f1a81b.js" as="script"><link rel="preload" href="/assets/js/2.b7d28b34.js" as="script"><link rel="preload" href="/assets/js/26.2e9f5321.js" as="script"><link rel="prefetch" href="/assets/js/10.3dcb08b2.js"><link rel="prefetch" href="/assets/js/11.0a18f7bd.js"><link rel="prefetch" href="/assets/js/12.c81a73a2.js"><link rel="prefetch" href="/assets/js/13.c98c26c1.js"><link rel="prefetch" href="/assets/js/14.36d42ece.js"><link rel="prefetch" href="/assets/js/15.bda77217.js"><link rel="prefetch" href="/assets/js/16.80047c9b.js"><link rel="prefetch" href="/assets/js/17.548d378f.js"><link rel="prefetch" href="/assets/js/18.86a99a23.js"><link rel="prefetch" href="/assets/js/19.f47c7d29.js"><link rel="prefetch" href="/assets/js/20.7e536bfb.js"><link rel="prefetch" href="/assets/js/21.6dac4a9e.js"><link rel="prefetch" href="/assets/js/22.c40c5423.js"><link rel="prefetch" href="/assets/js/23.e52bc27f.js"><link rel="prefetch" href="/assets/js/24.bfa36715.js"><link rel="prefetch" href="/assets/js/25.195a37e7.js"><link rel="prefetch" href="/assets/js/27.6e80d82e.js"><link rel="prefetch" href="/assets/js/28.2cd04043.js"><link rel="prefetch" href="/assets/js/29.47a1754b.js"><link rel="prefetch" href="/assets/js/3.c5f9f392.js"><link rel="prefetch" href="/assets/js/30.7d2dd507.js"><link rel="prefetch" href="/assets/js/31.d395de78.js"><link rel="prefetch" href="/assets/js/32.99af69ad.js"><link rel="prefetch" href="/assets/js/33.1e427cb5.js"><link rel="prefetch" href="/assets/js/34.f9dd6bb5.js"><link rel="prefetch" href="/assets/js/35.d7896692.js"><link rel="prefetch" href="/assets/js/4.f06af0e8.js"><link rel="prefetch" href="/assets/js/5.76fab509.js"><link rel="prefetch" href="/assets/js/6.e8823ccd.js"><link rel="prefetch" href="/assets/js/7.64b43ff1.js"><link rel="prefetch" href="/assets/js/8.a6738900.js"><link rel="prefetch" href="/assets/js/9.4baf5fe4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6c3cad56.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">wfmiss Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><!----> <span class="title" style="display:;">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/0/" class="nav-link">考试报名流程</a></li><li class="dropdown-item"><!----> <a href="/c/" class="nav-link router-link-active">C语言</a></li><li class="dropdown-item"><!----> <a href="/smc/0/" class="nav-link">SMC</a></li><li class="dropdown-item"><!----> <a href="/vue/note0/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="练习题" class="dropdown-title"><!----> <span class="title" style="display:;">练习题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/c1/1/" class="nav-link">C语言</a></li><li class="dropdown-item"><!----> <a href="/c1/" class="nav-link">SMC&amp;P</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/wfmiss/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><!----> <span class="title" style="display:;">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/0/" class="nav-link">考试报名流程</a></li><li class="dropdown-item"><!----> <a href="/c/" class="nav-link router-link-active">C语言</a></li><li class="dropdown-item"><!----> <a href="/smc/0/" class="nav-link">SMC</a></li><li class="dropdown-item"><!----> <a href="/vue/note0/" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="练习题" class="dropdown-title"><!----> <span class="title" style="display:;">练习题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/c1/1/" class="nav-link">C语言</a></li><li class="dropdown-item"><!----> <a href="/c1/" class="nav-link">SMC&amp;P</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/wfmiss/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/c/note0/" class="sidebar-link">C语言发展历程</a></li><li><a href="/c/note1/" class="sidebar-link">第一章 基础语法</a></li><li><a href="/c/note2/" class="sidebar-link">第二章 控制语句</a></li><li><a href="/c/note3/" class="sidebar-link">第三章 数组</a></li><li><a href="/c/note4/" class="sidebar-link">第四章 函数实现模块化设计</a></li><li><a href="/c/note5/" class="sidebar-link">第五章 指针</a></li><li><a href="/c/note6/" aria-current="page" class="active sidebar-link">第六章 自定数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/c/note6/#_1-定义和使用结构体变量" class="sidebar-link">1. 定义和使用结构体变量</a></li><li class="sidebar-sub-header"><a href="/c/note6/#_2-使用结构体数组" class="sidebar-link">2. 使用结构体数组</a></li><li class="sidebar-sub-header"><a href="/c/note6/#_3-结构体指针" class="sidebar-link">3. 结构体指针</a></li><li class="sidebar-sub-header"><a href="/c/note6/#_4-用指针处理链表" class="sidebar-link">4. 用指针处理链表</a></li><li class="sidebar-sub-header"><a href="/c/note6/#_5-共同体类型" class="sidebar-link">5. 共同体类型</a></li><li class="sidebar-sub-header"><a href="/c/note6/#_6-使用枚举类型" class="sidebar-link">6. 使用枚举类型</a></li><li class="sidebar-sub-header"><a href="/c/note6/#_7-用typedef声明新类型名" class="sidebar-link">7. 用typedef声明新类型名</a></li></ul></li><li><a href="/c/note7/" class="sidebar-link">第七章 对文件的输入输出</a></li><li><a href="/c/note8/" class="sidebar-link">变量的存储类别及作用域</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><a href="/c/#C语言" data-v-0c557b5e>C语言</a></li></ul> <div class="info" data-v-0c557b5e><div title="作者" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="https://wfmiss.cn" target="_blank" title="作者" class="beLink" data-v-0c557b5e>eric</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2021-05-11</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">第六章 自定数据类型<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="第六章-自定数据类型"><a href="#第六章-自定数据类型" class="header-anchor">#</a> 第六章 自定数据类型</h1> <h2 id="_1-定义和使用结构体变量"><a href="#_1-定义和使用结构体变量" class="header-anchor">#</a> 1. 定义和使用结构体变量</h2> <p>由不同类型数据组成的的组合型的数据结构，它称为结构体（<code>structre</code>）。</p> <p>声明一个结构体类型的一般形式为：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span> 结构体名<span class="token punctuation">{</span>
    成员列表
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>struct</code>是声明结构体类型时必须使用的关键字，不能省略。</p> <p>注意：结构体类型的名字是由一个关键字<code>struct</code>和结构体名组成的。结构体名是由用户指定的，又称“结构体标记”（structure tag），以区别于其他结构体类型。上面的结构体声明中Student 就是结构体名（结构体标记）。</p> <p>花括号内是该结构体所包括的子项，称为结构体的成员（member）。对各成员都应进行类型声明，即：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>类型名 成员名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>“成员表列”（member list）也称为“域表”（field list），每一个成员是结构体中的一个域。成员名命名规则与变量名相同。</p> <p><strong>说明：</strong></p> <p>(1)结构体类型并非只有一种，而是可以设计出许多种结构体类型，还可以根据需要建立结构体类型，各自包含不同的成员。</p> <p>(2)成员可以属于另一个结构体类型。</p> <p>例如：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">Date</span>					<span class="token comment">//声明一个结构体类型struct Date</span>
<span class="token punctuation">{</span> 
    <span class="token keyword">int</span> month<span class="token punctuation">;</span>				<span class="token comment">//月</span>
    <span class="token keyword">int</span> day<span class="token punctuation">;</span>				<span class="token comment">//日</span>
    <span class="token keyword">int</span> year<span class="token punctuation">;</span>				<span class="token comment">//年</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">Student</span>				<span class="token comment">//声明一个结构体类型struct Student</span>
<span class="token punctuation">{</span> 
    <span class="token keyword">int</span> num<span class="token punctuation">;</span>
    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
    <span class="token keyword">char</span> sex<span class="token punctuation">;</span>
    <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span> 	<span class="token comment">//成员birthday属于struct Date类型</span>
    <span class="token keyword">char</span> addr<span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>定义结构体类型变量</strong></p> <ol><li>先声明结构体类型，再定义该类型的变量</li></ol> <p>上面已声明了一个结构体类型<code>struct Student</code>，可以用它来定义变量。例如:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">Student</span> student1<span class="token punctuation">,</span>student2<span class="token punctuation">;</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    <span class="token operator">|</span>				<span class="token operator">|</span>		<span class="token operator">|</span>
结构体类型名		    结构体变量名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这种方式是声明类型和定义变量分离，在声明类型后可以随时定义变量，比较灵活。</p> <ol start="2"><li>在声明类型的同时定义变量</li></ol> <p>例如：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">Student</span>
<span class="token punctuation">{</span> 
    <span class="token keyword">int</span> num<span class="token punctuation">;</span>
    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> sex<span class="token punctuation">;</span>
    <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">float</span> score<span class="token punctuation">;</span>
    <span class="token keyword">char</span> addr<span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>studentl<span class="token punctuation">,</span>student2<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>它的作用与第一种方法相同，但是在定义struct Student 类型的同时定义两个struct Student类型的变量studentl 和student2。</p> <p>这种定义方法的一般形式为：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span> 结构体名<span class="token punctuation">{</span>
    成员列表
<span class="token punctuation">}</span>变量名表列<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>声明类型和定义变量放在一起进行，能直接看到结构体的结构，比较直观，在写小程序时用此方式比较方便,但写大程序时，往往要求对类型的声明和对变量的定义分别放在不同的地方，以使程序结构清晰，便于维护，所以一般不多用这种方式。</p> <ol start="3"><li>不指定类型名而直接定义结构体类型变量</li></ol> <p>其一般形式为：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span><span class="token punctuation">{</span>
    成员表列
<span class="token punctuation">}</span>变量名表列<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>指定了一个无名的结构体类型,它没有名字（不出现结构体名）。显然不能再以此结构体类型去定义其他变量。这种方式用得不多。</p> <p><strong>说明：</strong></p> <p>(1)结构体类型与结构体变量是不同的概念，不要混淆。只能对变量赋值、存取或运算，而不能对一个类型赋值、存取或运算。在编译时，对类型是不分配空间的,只对变量分配空间。</p> <p>(2)结构体类型中的成员名可以与程序中的变量名相同，但二者不代表同一对象。 例如，程序中可以另定义一个变量<code>num</code>，它与<code>struct Student</code>中的<code>num</code>是两回事，互不干扰。</p> <p>(3)对结构体变量中的成员（即“域”），可以单独使用，它的作用与地位相当于普通变量。关于对成员的引用方法见下节。</p> <p><strong>结构体变量的初始化和引用</strong></p> <p>在定义结构体变量时,可以对它初始化.即赋予初始值。然后可以引用这个变量，例如输出它的成员的值。</p> <p>(1)在定义结构体变量时可以对它的成员初始化。初始化列表是用花括号括起来的一些常量，这些常量依次赋给结构体变量中的各成员。</p> <p>注意：是对结构体变量初始化，而不是对结构体类型初始化。</p> <p><code>C99</code>标准允许对某一成员初始化，如:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">Student</span> b<span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token char">' &quot;Zhang Fang '</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//在成员名前有成员运算符&quot;.&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>“. name”</code>隐含代表结构体变量<code>b</code>中的成员<code>b.name</code>。其他未被指定初始化的数值型成员被系统初始化为0，字符型成员被系统初始化为<code>'\0'</code>，指针型成员被系统初始化为NULL。</p> <p>(2)可以引用结构体变量中成员的值，引用方式为：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>结构体变量名<span class="token punctuation">.</span>成员名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>“.”</code>是成员运算符,它在所有的运算符中优先级最高，因此可以把<code>b.name</code>作为一个整体来看待，相当于一个变量。</p> <p>注意：不能企图通过输出结构体变量名来达到输出结构体变量所有成员的值。</p> <p>下面用法不正确：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//企图用结构体变量名输出所有成员的值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>只能对结构体变量中的各个成员分别进行输人和输出。</p> <p>(3)如果成员本身又属一个结构体类型，则要用若干个成员运算符，一级一级地找到最低的一级的成员。只能对最低级的成员进行赋值或存取以及运算。如果在结构体<code>struct Student</code>类型的成员中包含另一个结构体<code>struct date</code>类型的成员<code>birthday</code>(为一个结构体) ,则引用成员的方式为：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>studentl<span class="token punctuation">.</span>num			<span class="token comment">//(结构体变量studentl中的成员num)</span>
studentl<span class="token punctuation">.</span>birthday<span class="token punctuation">.</span>month <span class="token comment">//(结构体变量studentl中的成员birthday中的成员month)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>不能用<code>student1. birthday</code>来访问<code>student1</code> 变量中的成员<code>birthday</code>, 因为<code>birthday</code> 本身是一个结构体成员。</p> <p>(4)对结构体变量的成员可以像普通变量一样进行各种运算（根据其类型决定可以进行的运算）。</p> <p>例如:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>student2<span class="token punctuation">.</span>score <span class="token operator">=</span> studentl<span class="token punctuation">.</span>score<span class="token punctuation">;</span>		 <span class="token comment">//(赋值运算)</span>
sum <span class="token operator">=</span> student1<span class="token punctuation">.</span>score<span class="token operator">+</span>student2<span class="token punctuation">.</span>score<span class="token punctuation">;</span>	 <span class="token comment">//(加法运算) </span>
studentl<span class="token punctuation">.</span>age<span class="token operator">++</span><span class="token punctuation">;</span>							 <span class="token comment">//(自加运算)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>由于<code>“.”</code>运算符的优先级最高，因此<code>studentl.age++</code>是对(<code>student1.age</code>)进行自加运算，而不是先对<code>age</code>进行自加运算。</p> <p>(5)同类的结构体变量可以互相赋值，如：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>studentl <span class="token operator">=</span> student2<span class="token punctuation">;</span><span class="token comment">//假设student1和student2已定义为同类型的结构体变量</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>(6)可以引用结构体变量成员的地址，也可以引用结构体变量的地址。</p> <p>例如:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>student1<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//(输人studentl. num的值)</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%o&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>student1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//(输出结构体变量studentl的起始地址)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>但不能用以下语句整体读人结构体变量，例如：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">&quot;%d,%s,%c,%d,%f,%s\n&quot;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span><span class="token punctuation">.</span>studentl<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>说明：结构体变量的地址主要用作函数参数，传递结构体变量的地址。</p> <h2 id="_2-使用结构体数组"><a href="#_2-使用结构体数组" class="header-anchor">#</a> 2. 使用结构体数组</h2> <p>(1)定义结构体数组一般形式是：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span>结构体名<span class="token punctuation">{</span>
    成员表列
<span class="token punctuation">}</span>数组名<span class="token punctuation">[</span>数组长度<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>先声明一个结构体类型(如<code>struct Person</code>)，然后再用此类型定义结构体数组:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>结构体类型 数组名<span class="token punctuation">[</span>数组长度<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">Person</span> leader<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//leader是结构体数组名</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>(2)对结构体数组初始化的形式是在定义数组的后面加上：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>结构体类型 数组名<span class="token punctuation">[</span>数组长度<span class="token punctuation">]</span><span class="token operator">=</span> <span class="token punctuation">{</span>初值表列<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">Person</span> leader<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;Li&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;Zhang&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;Sun&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_3-结构体指针"><a href="#_3-结构体指针" class="header-anchor">#</a> 3. 结构体指针</h2> <p><strong>指向结构体变量的指针</strong></p> <p>指向结构体对象的指针变量既可指向结构体变量，也可指向结构体数组中的元素。指针变量的基类型必须与结构体变量的类型相同。</p> <p>例如:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">Student</span><span class="token operator">*</span> pt<span class="token punctuation">;</span>		<span class="token comment">//pt可以指向structStudent类型的变量或数组元素</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>说明：为了使用方便和直观，C语言允许把<code>(*p).num</code>用<code>p-&gt;num</code>代替，“<code>-&gt;</code>”代表 一个箭头，<code>p-&gt;num</code>表示<code>p</code>所指向的结构体变量中的<code>num</code>成员。同样，<code>(*p).name</code>等价于<code>p-&gt;name</code>。“<code>-&gt;</code>”称为指向运算符。</p> <p>如果<code>p</code>指向一个结构体变量<code>stu</code>,以下3种用法等价：</p> <p>①<code>stu.成员名 (如stu. num);</code></p> <p>②<code>(*p).成员名 (如(*p).num);</code></p> <p>③<code>p-&gt;成员名 (如p-&gt;num)</code>。</p> <p><strong>指向结构体数组的指针</strong></p> <p>可以用指针变量指向结构体数组的元素。</p> <p>例如：有3个学生的信息，放在结构体变量中，要求输出全部学生的信息。</p> <p>(1)声明结构体类型 <code>struct Student</code>，并定义结构体数组，同时初始化；</p> <p>(2)定义一个指向<code>struct Student</code> 类型数据的指针变量p;</p> <p>(3)使P指向结构体数组的首元素，输出它指向的元素中的有关信息;</p> <p>(4)使p指向结构体数组的下一个元素，输出它指向的元素中的有关信息;</p> <p>(5)再使p指向结构体数组的下一个元素，输出它指向的元素中的有关信息。</p> <p>编写程序:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">struct</span> <span class="token class-name">Student</span><span class="token punctuation">{</span>		<span class="token comment">//声明结构体类型structStudent</span>
    <span class="token keyword">int</span> num<span class="token punctuation">;</span>
    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> sex<span class="token punctuation">;</span>
    <span class="token keyword">int</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">Student</span> stu<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token number">10101</span><span class="token punctuation">,</span><span class="token string">&quot;Li Lin&quot;</span><span class="token punctuation">,</span><span class="token char">'M'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">10102</span><span class="token punctuation">,</span><span class="token string">&quot;Zhang Fang&quot;</span><span class="token punctuation">,</span><span class="token char">'M'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">10104</span><span class="token punctuation">,</span><span class="token string">&quot;Wang Min&quot;</span><span class="token punctuation">,</span><span class="token char">'F'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//定 义结构体数组并初始化</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">struct</span> <span class="token class-name">Student</span><span class="token operator">*</span> p<span class="token punctuation">;</span><span class="token comment">//定义指向structStudent结构体变量的指针变量</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; No. Name           sex age\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>p<span class="token operator">=</span> stu<span class="token punctuation">;</span>p<span class="token operator">&lt;</span>stu<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">;</span>p<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; %5d %-20s %2c %4d\n&quot;</span><span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>num<span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>name<span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>sex<span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出结果</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/wfmiss/pictures/C_language/20210516182619.png" alt=""></p> <p><img src="https://cdn.jsdelivr.net/gh/wfmiss/pictures/C_language/20210516182618.png" alt=""></p> <p><strong>注意：</strong></p> <p>(1)如果p的初值为<code>stu</code>,即指向<code>stu</code>的序号为0的元素，p加1后，就指向下一个元素。</p> <p>例如：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token punctuation">(</span><span class="token operator">++</span>p<span class="token punctuation">)</span><span class="token operator">-&gt;</span>num	<span class="token comment">//先使p自加1，然后得到p指向的元素中的num成员值(10102) </span>
<span class="token punctuation">(</span>p<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>num	<span class="token comment">//先求得p-&gt;num的值(即10101)，然后再使p自加1，指向stu[1]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>请注意以上二者的不同。</p> <p>(2)程序定义了p是一个指向<code>struct Student</code>类型对象的指针变量,它用来指向一个 <code>struct Student</code>类型的对象(p的值是<code>stu</code>数组的一个元素(如<code>stu[0]</code>或<code>stu[1]</code>)的起始地址),不应用来指向<code>stu</code>数组元素中的某一成员。</p> <p>例如，下面的用法是不对的:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>p<span class="token operator">=</span> stu<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">//stu[1].name是stu[1]元素中的成员name 的首字符的地址</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>编译时将给出“警告”信息，表示地址的类型不匹配。不要认为反正p是存放地址的，可以将任何地址赋给它。如果一定要将某一成员的地址赋给p，可以用强制类型转换，先将成员的地址转换成p的类型。例如:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>p<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Student</span> <span class="token operator">*</span> <span class="token punctuation">)</span>stu<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时，p的值是<code>stu[0]</code>元素的name成员的起始地址。可以用“<code>printf(&quot;%s&quot;,p);</code>&quot;输出 <code>stu[0]</code>中成员name的值。但是,p仍保持原来的类型。如果执行“<code>printf(&quot;%s',p+1);</code>,则 会输出<code>stu[1]</code>中name 的值。执行<code>p++</code>时,p的值的增量是结构体<code>struct Student</code>的长度。</p> <p><strong>用结构体变量和结构体变量的指针作函数参数</strong></p> <p>将一个结构体变量的值传递给另一个函数，有3个方法:</p> <p>(1)用结构体变量的成员作参数。例如,用<code>stu[1]. num</code>或<code>stu[2].name</code>作函数实参，将实参值传给形参。用法和用普通变量作实参是一样的，属于“值传递”方式。应当注意实参与形参的类型保持一致。</p> <p>(2)用结构体变量作实参。用结构体变量作实参时,采取的也是“值传递”的方式，将结构体变量所占的内存单元的内容全部按顺序传递给形参，形参也必须是同类型的结构体变量。在函数调用期间形参也要占用内存单元。这种传递方式在空间和时间上开销较大，如果结构体的规模很大时，开销是很可观的。此外，由于采用值传递方式，如果在执行被调用函数期间改变了形参(也是结构体变量)的值,该值不能返回主调函数，这往往造成使用上的不便。因此一般较少用这种方法。</p> <p>(3)用指向结构体变量(或数组元素)的指针作实参，将结构体变量(或数组元素)的地址传给形参。</p> <h2 id="_4-用指针处理链表"><a href="#_4-用指针处理链表" class="header-anchor">#</a> 4. 用指针处理链表</h2> <p><strong>什么是链表？</strong></p> <p>链表是动态地进行存储分配的一种结构。
作用是为了避免内存的浪费，它是根据需要开辟内存单元设定的。</p> <p><strong>单向链表</strong>
由 head 的 next 指向下个节点
头指针：head （整个链表都必须包含head）
结点 ：必须包含两部分（1）用户需要用的实际数据 （2）下一个节点的地址
空指针（表尾）：NULL</p> <p><strong>建立链表（利用结构体）</strong></p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">Student</span>
<span class="token punctuation">{</span>	<span class="token keyword">int</span> num<span class="token punctuation">;</span>
	<span class="token keyword">float</span> score<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> <span class="token class-name">Student</span> <span class="token operator">*</span>next<span class="token punctuation">;</span> <span class="token comment">//next是指针变量，指向下一个结构体的地址</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>输出链表</strong></p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">output</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">student</span> <span class="token operator">*</span>head<span class="token punctuation">)</span>  <span class="token comment">// 定义一个链表输出的函数</span>
<span class="token punctuation">{</span>
    <span class="token keyword">struct</span> <span class="token class-name">student</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>  <span class="token comment">// 定义结构体指针变量p1，用于结点的后移，以实现输出操作</span>
    p <span class="token operator">=</span> head<span class="token punctuation">;</span>  <span class="token comment">// 将head赋给p1，以实现对该链表的操作</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token comment">// 建立一个while循环，结束条件是到达尾结点</span>
    <span class="token keyword">do</span>
    <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n%f\n&quot;</span><span class="token punctuation">,</span> p1<span class="token operator">-&gt;</span>num<span class="token punctuation">,</span> p1<span class="token operator">-&gt;</span>score<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出结点中的数值部分</span>
        p1 <span class="token operator">=</span> p1<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>  <span class="token comment">// 将下一个结点的位置赋给p1</span>
    <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当p不是空地址时循环</span>
  
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>注意：</strong> <code>malloc()</code>分配内存后最后记得<code>free()</code>释放内存。</p> <p>可以参看以下博客学习：</p> <p>https://blog.csdn.net/linwh8/article/details/49648601</p> <hr> <h2 id="_5-共同体类型"><a href="#_5-共同体类型" class="header-anchor">#</a> 5. 共同体类型</h2> <p>使几个不同的变量公享同一段内存的结构，称为&quot;共同体&quot;类型结构。</p> <p>定义共同体类型变量的的一般形式为：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">union</span> 共用体名<span class="token punctuation">{</span>
    成员列表
<span class="token punctuation">}</span>变量列表<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>例如：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">union</span> Data<span class="token punctuation">{</span>		<span class="token comment">//表示不同类型的变量i,ch,f可以存放到同一段存储单元中</span>
    <span class="token keyword">int</span> t<span class="token punctuation">;</span>
    <span class="token keyword">char</span> ch<span class="token punctuation">;</span>
    <span class="token keyword">float</span> f<span class="token punctuation">;</span>
<span class="token punctuation">}</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">;</span>			<span class="token comment">//在声明类型同时定义变量</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>也可以将类型声明与变量定义分开：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">union</span> Data<span class="token punctuation">{</span> 		<span class="token comment">//声明共用体类型</span>
    <span class="token keyword">int</span> I<span class="token punctuation">;</span>
    <span class="token keyword">char</span> ch<span class="token punctuation">;</span>
    <span class="token keyword">float</span> f<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">union</span> Data a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">;</span>	<span class="token comment">//用共用体类型定义变量</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>即先声明一个<code>union Data</code>类型，再将a,b,c定义为<code>union Data</code>类型的变量。</p> <p>当然也可以直接定义共用体变量，例如:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">union</span><span class="token punctuation">{</span> 			<span class="token comment">//没有定义共用体类型名</span>
	<span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">char</span> ch<span class="token punctuation">;</span>
    <span class="token keyword">float</span> f<span class="token punctuation">;</span>
<span class="token punctuation">}</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>可以看到，“共用体” 与 “结构体” 的定义形式相似。但它们的含义是不同的。</p> <p>结构体变量所占内存长度是各成员占的内存长度之和。每个成员分别占有其自己的内存单元。而共用体变量所占的内存长度等于最长的成员的长度。例如，上面定义的“共用 体”变量a，b，c各占4个字节（因为一个float 型变量占4个字节），而不是各占4+1+4=9个字节。</p> <p><strong>引用共用体变量的方式</strong></p> <p>只有先定义了共同体变量才能引用它，但应注意，不能引用共同变量，而只能引用共同体变量中的成员。</p> <p>例如：【上面定义的a,b,c共用体】</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>a<span class="token punctuation">.</span>i		<span class="token comment">//引用共同体变量中的整型变量i</span>
a<span class="token punctuation">.</span>ch	<span class="token comment">//引用共同体变量中的整型变量i</span>
a<span class="token punctuation">.</span>f		<span class="token comment">//引用共同体变量中的整型变量i</span>

<span class="token comment">//不能只引用共同体变量,下面的引用就是错误的</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//正确的写法为</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c&quot;</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f&quot;</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr> <p><strong>共用体类型数据的特点</strong></p> <p>在使用共用体型数据时要主要以下特点：</p> <ul><li>同一个内存段可以用来存放几种不同类型的成员，但在每一瞬时只能存放其中一个成员，而不是同时存放几个。</li> <li>可以对共用体变量初始化，但初始化表中只能有一个常量。
<ul><li>以下用法为错误的：</li></ul></li></ul> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">union</span> Data<span class="token punctuation">{</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">char</span> ch<span class="token punctuation">;</span>
    <span class="token keyword">float</span> f<span class="token punctuation">;</span>
<span class="token punctuation">}</span>a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token char">'a'</span><span class="token punctuation">,</span><span class="token number">1.5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>			<span class="token comment">//不能初始化3个成员变量，它们占用同一段存储单元</span>
<span class="token keyword">union</span> Data a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">16</span><span class="token punctuation">}</span><span class="token punctuation">;</span>		<span class="token comment">//正确，对第1个成员初始化</span>
<span class="token keyword">union</span> Data a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">.</span>ch<span class="token operator">=</span><span class="token char">'j'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>	<span class="token comment">//C99允许对指定的一个成员初始化</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>共用体变量中起作用的成员是最后一次被赋值的成员，在对共用体变量中的一个成员赋值之后，原变量存储单元中的值就被取代了。</li> <li>共同体变量的地址和它的各成员的地址都是同一地址。
<ul><li>例如：</li></ul></li></ul> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token operator">&amp;</span>a<span class="token punctuation">.</span>i<span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">.</span>ch<span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">.</span>f 		<span class="token comment">//都是同一地址</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>不能对共同变量名赋值，也不能企图引用变量名来得到一个值。
<ul><li>例如，下面这些都是不对的：</li></ul></li></ul> <div class="language-c line-numbers-mode"><pre class="language-c"><code>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//不能对共同体变量赋值，赋给谁？</span>
m <span class="token operator">=</span> a<span class="token punctuation">;</span>	<span class="token comment">//企图引用共同体变量名以得到一个值赋给整型变量m</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
<span class="token comment">//C99允许同类型的共同体变量相互赋值。</span>
b <span class="token operator">=</span> a<span class="token punctuation">;</span>	<span class="token comment">//a和b是同类型的共同变量，合法</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>以前的C规定不能把共同体变量作为函数参数，但是可以使用指向共同体变量的指针作函数参数。<code>C99</code>允许用共同体变量作为函数参数。</li> <li>共同体类型可以出现在结构体类型定义中，也可以定义共用体数组。反之，结构体也可以出现在共用体类型中，数组也可以作为共用体的成员。</li></ul> <h2 id="_6-使用枚举类型"><a href="#_6-使用枚举类型" class="header-anchor">#</a> 6. 使用枚举类型</h2> <p>如果一个变量只有几种可能的值，则可以定义为枚举（enumeration）类型，<strong>所谓 “枚举” 就是指把可能的值一一列举出来，变量的值只限制于列举出来的值的范围内。</strong></p> <p>例如:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">enum</span> <span class="token class-name">Weekday</span><span class="token punctuation">{</span>sun<span class="token punctuation">,</span>mon<span class="token punctuation">,</span>tue<span class="token punctuation">,</span>wed<span class="token punctuation">,</span>thu<span class="token punctuation">,</span>fri<span class="token punctuation">,</span>sat<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>以上声明了一个枚举类型<code>enum Weekday</code>然后可以用此类型来定义变量。</p> <p>例如:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">enum</span> <span class="token class-name">Weekday</span> workday<span class="token punctuation">,</span>weekend<span class="token punctuation">;</span> 
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>   <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    <span class="token operator">|</span>				<span class="token operator">|</span>
 枚举类型		  枚举变量
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>workday</code>和<code>weekend</code>被定义为枚举变量,花括号中的<code>sun,mon,..，sat</code>称为枚举元素或枚举常量。它们是用户指定的名字。枚举变量和其他数值型量不同,它们的值只限于花括号中指定的值之一。例如枚举变量<code>workday</code>和<code>weekend</code>的值只能是<code>sun</code>到<code>sat</code>之一。</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>workday<span class="token operator">=</span> mon<span class="token punctuation">;</span> <span class="token comment">//正确,mon是指定的枚举常量之一</span>

weekend<span class="token operator">=</span> sun<span class="token punctuation">;</span><span class="token comment">//正确,sun是指定的枚举常量之一</span>

weekday <span class="token operator">=</span> monday<span class="token punctuation">;</span><span class="token comment">//不正确,monday不是指定的枚举常量之一</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>枚举常量是由程序设计者命名的,用什么名字代表什么含义,完全由程序员根据自己的需要而定,并在程序中作相应处理。</p> <p>也可以不声明有名字的枚举类型,而直接定义枚举变量,例如:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">enum</span><span class="token punctuation">{</span>sun<span class="token punctuation">,</span>mon<span class="token punctuation">,</span>tue<span class="token punctuation">,</span>wed<span class="token punctuation">,</span>thu<span class="token punctuation">,</span>fri<span class="token punctuation">,</span>sat<span class="token punctuation">}</span> workday<span class="token punctuation">,</span>weekend<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>声明枚举类型用 <code>enum</code> 开头</strong>。</p> <p>声明枚举类型的一般形式为：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">enum</span> <span class="token punctuation">[</span>枚举名<span class="token punctuation">]</span><span class="token punctuation">{</span>枚举元素……<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>说明:</strong></p> <p>(1) C编译对枚举类型的枚举元素按常量处理，故称枚举常量。不要因为它们是标识符（有名字）而把它们看作变量，不能对它们赋值。</p> <p>(2) 每一个枚举元素都代表一个整数,C语言编译按定义时的顺序默认它们的值为<code>0,1,2,3,4,5...</code>。在上面的定义中,<code>sun</code>的值自动设为0,<code>mon</code>的值为1,.,<code>sat</code>的值为6。如果有赋值语句:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>workday<span class="token operator">=</span> mon<span class="token punctuation">;</span><span class="token comment">//相当于</span>
workday<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//枚举常量是可以引用和输出的。例如:</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span>workday<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将输出整數1。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>也可以人为地指定枚举元素的数值，在定义枚举类型时显式地指定，例如：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">enum</span> <span class="token class-name">Weekday</span><span class="token punctuation">{</span>sun<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span>mon<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>tue<span class="token punctuation">,</span>wed<span class="token punctuation">,</span>thu<span class="token punctuation">,</span>fri<span class="token punctuation">,</span>sat<span class="token punctuation">}</span> workday<span class="token punctuation">,</span>week_end<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>指定枚举常量<code>sun</code>的值为7,<code>mon</code>为1,以后顺序加1,<code>sat</code>为6。</p> <p>由于枚举型变量的值是整数，因此<code>C99</code>把枚举类型也作为整型数据中的一种，即用户自行定义的整数类型。</p> <p>(3)枚举元素可以用来作判断比较。例如:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">if</span><span class="token punctuation">(</span> workday<span class="token operator">=</span> <span class="token operator">=</span> mon<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token keyword">if</span><span class="token punctuation">(</span> workday<span class="token operator">&gt;</span> sun<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>枚举元素的比较规则是按其在初始化时指定的整数来进行比较的。如果定义时未人为 指定，则按上面的默认规则处理，即第1个枚举元素的值为0，故<code>mon &gt; sun</code>，<code>sat &gt; fri</code>。</p> <h2 id="_7-用typedef声明新类型名"><a href="#_7-用typedef声明新类型名" class="header-anchor">#</a> 7. 用typedef声明新类型名</h2> <p>用typedef指定新的类型名来代替已有的类型名。</p> <p>有以下两种情况：</p> <ol><li><strong>简单地用一个新的类型名代替原有的类型名</strong></li></ol> <p>例如：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">int</span> Integer<span class="token punctuation">;</span>	<span class="token comment">//指定用Integer为类型名,作用与int相同</span>
<span class="token keyword">typedef</span> <span class="token keyword">float</span> Real<span class="token punctuation">;</span>		<span class="token comment">//指定用Real为类型名,作用与float相同</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>指定用<code>Integer</code>代表int类型,Real代表float。 这样，以下两行等价：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>①<span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">;</span>
<span class="token keyword">float</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span>

②Integer i<span class="token punctuation">,</span>j<span class="token punctuation">;</span>
Real a<span class="token punctuation">,</span>b<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="2"><li><strong>命名一个简单的类型名代替复杂的类型表示方法</strong></li></ol> <p>从前面已知，除了简单的类型（如int，float等）、C程序中还会用到许多看起来比较复杂的类型，包括结构体类型、共用体类型枚举类型、指针类型、数组类型等，如：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">float</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>指针数组<span class="token punctuation">)</span>
<span class="token keyword">float</span><span class="token punctuation">(</span> <span class="token operator">*</span> <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">(</span>指向<span class="token number">5</span>个元素的<span class="token operator">-</span>维数组的指针<span class="token punctuation">)</span>
<span class="token keyword">double</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token operator">*</span> <span class="token punctuation">)</span><span class="token punctuation">(</span>定义函数，函数的參数是<span class="token keyword">double</span><span class="token operator">*</span>型数据<span class="token punctuation">,</span>即指向<span class="token keyword">double</span>数据的指针<span class="token punctuation">,</span>函数返回值也是指向<span class="token keyword">double</span>数据的指针<span class="token punctuation">)</span>
<span class="token keyword">double</span><span class="token punctuation">(</span> <span class="token operator">*</span> <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>指向函数的指针，函数返回值类型为<span class="token keyword">double</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token operator">*</span> <span class="token punctuation">(</span> <span class="token operator">*</span> <span class="token punctuation">(</span> <span class="token operator">*</span> <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">(</span>指向包含<span class="token number">10</span>个元素的一维数组的指针<span class="token punctuation">,</span>数组元素的类型为函数指针<span class="token punctuation">(</span>函数的地址<span class="token punctuation">)</span>，函数没有参数，函数返回值是<span class="token keyword">int</span> 指针<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>有些类型形式复杂，难以理解，容易写错。C允许程序设计者用一个简单的名字代替复杂的类型形式。</p> <p>例如：</p> <p>(1)命名一个新的类型名代表结构体类型:</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">int</span> month<span class="token punctuation">;</span>
<span class="token keyword">int</span> year<span class="token punctuation">;</span>
<span class="token punctuation">}</span> Date<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>以上声明了一个新类型名Date，代表上面的一个结构体类型。然后可以用新的类型名Date去定义变量，如：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>Date birthday<span class="token punctuation">;</span>	<span class="token comment">//定义结构体类型变量birthday ,不要写成struct Date birthday;</span>
Date<span class="token operator">*</span> P<span class="token punctuation">;</span>		<span class="token comment">//定义结构体指针变量p.指向此结构体类型数据</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>(2)命名一个新的类型名代表数组类型：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">int</span> Num<span class="token punctuation">[</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">//声明Num为整型数组类型名</span>
Numa<span class="token punctuation">;</span>					<span class="token comment">//定义a为整型数组名,它有100个元素</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>(3)命名一个新的类型名代表指针类型：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">char</span> <span class="token operator">*</span> String<span class="token punctuation">;</span>	<span class="token comment">//声明String为字符指针类型</span>
String p<span class="token punctuation">,</span>s<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 		<span class="token comment">//定义p为字符指针变量,s为字符指针数组</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>(4)命名一个新的类型名代表指向函数的指针类型：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token function">typedefint</span><span class="token punctuation">(</span><span class="token operator">*</span>Pointer<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//声明Pointer为指向函数的指针类型,该函数返回整型值</span>
Pointer pl<span class="token punctuation">,</span>p2<span class="token punctuation">;</span>			<span class="token comment">//p1,p2为Pointer类型的指针变量</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>归纳起来，声明一个新的类型名的方法是：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>①先按定义变量的方法写出定义体(如:int i;)。
②将变量名换成新类型名(例如:将i换成Count)。
③在最前面加typedef(例如:typedef int Count)。
④然后可以用新类型名去定义变量。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>简单地说，就是按定义变量的方式，把变量名换上新类型名，并且在最前面加typedef，就声明了新类型名代表原来的类型。</p> <p>以定义上述的数组类型为例来说明：</p> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>①先按定义数组变量形式书泻: int a[100]。
②将变量名a换成自己命名的类型名:int Num[100]。
③在前面加上typedef,得到typedef int Num[100]。
④用来定义变量:Num a;
相当于定义了:int a[100];
同样,对字符指针类型,也是:
①char * p; 				//定义变量p的方式
②char * String;			//用新类型名String 取代变量名p
③typedef char * String;	//加typedef
④String p;				//用新类型名String定义变量,相当char*p;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>习惯上，常把用typedef声明的类型名的第1个字母用大写表示，以便与系统提供的标准类型标识符相区别。</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/wfmiss/notes/edit/master/docs/50.C语言/07.第六章自定数据类型.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">2022/05/23, 9:05:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/c/note5/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">第五章 指针</div></a> <a href="/c/note7/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">第七章 对文件的输入输出</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/c/note5/" class="prev">第五章 指针</a></span> <span class="next"><a href="/c/note7/">第七章 对文件的输入输出</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/c1/4/"><div>
            微机原理指令集
            <!----></div></a> <span class="date">04-11</span></dt></dl><dl><dd>02</dd> <dt><a href="/c1/5/"><div>
            输入输出系统接口芯片
            <!----></div></a> <span class="date">04-11</span></dt></dl><dl><dd>03</dd> <dt><a href="/c/note8/"><div>
            变量的存储类别及作用域
            <!----></div></a> <span class="date">03-23</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2022
    <span>wfmiss | notes</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f3f1a81b.js" defer></script><script src="/assets/js/2.b7d28b34.js" defer></script><script src="/assets/js/26.2e9f5321.js" defer></script>
  </body>
</html>
