(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{484:function(t,e,v){"use strict";v.r(e);var _=v(29),l=Object(_.a)({},(function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"输入输出系统接口芯片"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#输入输出系统接口芯片"}},[t._v("#")]),t._v(" 输入输出系统接口芯片")]),t._v(" "),v("h2",{attrs:{id:"输入输出-i-o-接口概念"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#输入输出-i-o-接口概念"}},[t._v("#")]),t._v(" 输入输出（I/O）接口概念")]),t._v(" "),v("p",[t._v("一、I/O接口概念")]),t._v(" "),v("p",[t._v("1、为什么需要I/O接口（电路）？")]),t._v(" "),v("ul",[v("li",[t._v("微机的外部设别多种多样")]),t._v(" "),v("li",[t._v("工作原理、信息格式、工作速度等方面差别很大")]),t._v(" "),v("li",[t._v("外设不能与CPU直接向相连")]),t._v(" "),v("li",[t._v("必须经过中间电路再与系统相连")])]),t._v(" "),v("p",[t._v("2、什么是I/O接口电路？")]),t._v(" "),v("ul",[v("li",[t._v("I/O接口是位于系统与外设间、用来协助完成数据传送和控制任务的逻辑电路；")]),t._v(" "),v("li",[t._v("可编程接口芯片、I/O总线槽的电路板（适配器）都是接口电路。")])]),t._v(" "),v("p",[t._v("3、I/O接口的主要功能")]),t._v(" "),v("ul",[v("li",[t._v("速度匹配、数据缓冲；")]),t._v(" "),v("li",[t._v("数据格式的转换；")]),t._v(" "),v("li",[t._v("对I/O端口寻址、地址译码；")]),t._v(" "),v("li",[t._v("CPU与外设信息联络；")]),t._v(" "),v("li",[t._v("设置中断和DMA控制逻辑")])]),t._v(" "),v("p",[t._v("4、端口（PORT）")]),t._v(" "),v("ul",[v("li",[t._v("泛指I/O地址，对应接口电路的寄存器；")]),t._v(" "),v("li",[t._v("一个接口电路可以具有多个I/O端口（寄存器）")]),t._v(" "),v("li",[t._v("数据端口、状态端口和控制端口：用于保存数据、状态信息")])]),t._v(" "),v("p",[t._v("二、I/O接口的典型结构")]),t._v(" "),v("p",[t._v("1、接口结构")]),t._v(" "),v("p",[t._v("2、I/O接口组成")]),t._v(" "),v("p",[t._v("接口由硬件和软件组成。")]),t._v(" "),v("p",[t._v("接口软件有两类：")]),t._v(" "),v("ul",[v("li",[t._v("初始化程序段：\n"),v("ul",[v("li",[t._v("设备驱动程序、设定芯片工作方式等")])])]),t._v(" "),v("li",[t._v("数据交换程序段：\n"),v("ul",[v("li",[t._v("管理、控制、驱动外设，负责和系统间信息交换。")])])])]),t._v(" "),v("p",[t._v("三、I/O端口的编址")]),t._v(" "),v("p",[t._v("两类编址")]),t._v(" "),v("ul",[v("li",[t._v("I/O端口单独编址（独立编址）：\n"),v("ul",[v("li",[t._v("I/O地址空间独立于存储地址空间，内存与I/O空间各自独立")]),t._v(" "),v("li",[t._v("如：8086/8088")])])]),t._v(" "),v("li",[t._v("I/O端口与存储器统一编址：\n"),v("ul",[v("li",[t._v("他们共享一个地址空间，内存与I/O空间共用")]),t._v(" "),v("li",[t._v("如：M6800")])])])]),t._v(" "),v("p",[t._v("独立编址：")]),t._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("优点：\n- I/O端口的地址空间独立\n- 控制和地址译码电路简单\n- 专门的I/O指令\n缺点：\n- I/O指令种类少\n- 空间少\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br"),v("span",{staticClass:"line-number"},[t._v("3")]),v("br"),v("span",{staticClass:"line-number"},[t._v("4")]),v("br"),v("span",{staticClass:"line-number"},[t._v("5")]),v("br"),v("span",{staticClass:"line-number"},[t._v("6")]),v("br"),v("span",{staticClass:"line-number"},[t._v("7")]),v("br")])]),v("p",[t._v("统一编址：")]),t._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("优点：\n- 不需要专门的I/O指令\n- I/O数据存取灵活\n缺点：\n- I/O端口要占去部分存储器地址空间\n- 程序不易阅读（不易分清访问存储器和访问外设）\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br"),v("span",{staticClass:"line-number"},[t._v("3")]),v("br"),v("span",{staticClass:"line-number"},[t._v("4")]),v("br"),v("span",{staticClass:"line-number"},[t._v("5")]),v("br"),v("span",{staticClass:"line-number"},[t._v("6")]),v("br")])]),v("p",[t._v("四、88/86的输入输出指令")]),t._v(" "),v("p",[t._v("1、I/O端口地址")]),t._v(" "),v("ul",[v("li",[t._v("外设的端口（PORT），即I/O地址。")]),t._v(" "),v("li",[t._v("88/86用于寻址外设端口的地址线为16条，")]),t._v(" "),v("li",[t._v("端口最多为2的16次方=65536（64KB）个，")]),t._v(" "),v("li",[t._v("端口号为：0000H-FFFFH")])]),t._v(" "),v("p",[t._v("2、I/O端口寻址方式")]),t._v(" "),v("p",[t._v("88/86的端口有64KB，不分段，两种寻址方式：")]),t._v(" "),v("ul",[v("li",[t._v("直接寻址：\n"),v("ul",[v("li",[t._v("只寻址00H-FFH前256个端口号")]),t._v(" "),v("li",[t._v("指令中操作数直接使用端口号；")])])]),t._v(" "),v("li",[t._v("间接寻址：\n"),v("ul",[v("li",[t._v("可寻址全部64K个端口号：0000H-FFFFH")]),t._v(" "),v("li",[t._v("DX寄存器的值存放端口号；")]),t._v(" "),v("li",[t._v("0100H-FFFFH的端口只能采用间接寻址方式。")])])])]),t._v(" "),v("p",[t._v("3、输入指令")]),t._v(" "),v("p",[t._v("将外设数据传送给CPU内的AL/AX：")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("IN AL,端口地址")])]),t._v(" "),v("li",[v("code",[t._v("IN AL,DX/i8 ;字节输入")])]),t._v(" "),v("li",[v("code",[t._v("IN AX,DX/i8 ;字输入")])])]),t._v(" "),v("p",[t._v("4、输出指令")]),t._v(" "),v("p",[t._v("将CPU内的AL/AX数据传送给外设：")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("OUT 端口地址,AL/AX")])]),t._v(" "),v("li",[v("code",[t._v("OUT DX/i8,AL ;字节输出")])]),t._v(" "),v("li",[v("code",[t._v("OUT DX/i8,AX ;字输出")])])]),t._v(" "),v("p",[t._v("五、I/O地址的译码")]),t._v(" "),v("ul",[v("li",[t._v("门电路：接口电路只占少量I/O地址，可以利用线选法地址译码。")]),t._v(" "),v("li",[t._v("译码器：选用2：4译码器或3：8译码器进行")])]),t._v(" "),v("p",[t._v("1、逻辑门电路进行I/O地址译码")]),t._v(" "),v("h2",{attrs:{id:"数据传送方式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#数据传送方式"}},[t._v("#")]),t._v(" 数据传送方式")]),t._v(" "),v("ul",[v("li",[t._v("程序控制的数据传送：CPU执行程序中I/O指令完成传送，分为：无条件传送、查询传送、中断传送。")]),t._v(" "),v("li",[t._v("直接存储器存取（DMA）：\n"),v("ul",[v("li",[t._v("硬件芯片8237；")]),t._v(" "),v("li",[t._v("DMAC利用系统总线在外设和主存间传送。")])])]),t._v(" "),v("li",[t._v("I/O处理机实现数据传送：\n"),v("ul",[v("li",[t._v("协处理器8089：数据输入/出")]),t._v(" "),v("li",[t._v("CPU委托专门的I/O处理机来完成数据传送。")])])])]),t._v(" "),v("h3",{attrs:{id:"一、无条件传送方式-同步"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、无条件传送方式-同步"}},[t._v("#")]),t._v(" 一、无条件传送方式（同步）")]),t._v(" "),v("p",[t._v("1、原理：")]),t._v(" "),v("ul",[v("li",[t._v("CPU与慢速外设交换数据；")]),t._v(" "),v("li",[t._v("外设处于“就绪”状态，随时可以进行数据传送，亦称同步传送；")]),t._v(" "),v("li",[t._v("适用于简单设备，如：LED数码管，按键等；")]),t._v(" "),v("li",[t._v("传送条件：外设必须随时就绪。")])]),t._v(" "),v("h3",{attrs:{id:"二、查询传送方式-异步"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、查询传送方式-异步"}},[t._v("#")]),t._v(" 二、查询传送方式（异步）")]),t._v(" "),v("p",[t._v("1、原理")]),t._v(" "),v("ul",[v("li",[t._v("CPU先查询外设的工作状态，")]),t._v(" "),v("li",[t._v("在外设就绪时，实现数据输入或输出；")]),t._v(" "),v("li",[t._v("查询传送的特点是：工作可靠，但传送效率低。")])]),t._v(" "),v("p",[t._v("2、查询传送的两个环节")]),t._v(" "),v("ul",[v("li",[t._v("查询\n"),v("ul",[v("li",[t._v("寻址状态口")]),t._v(" "),v("li",[t._v("读取状态端口的状态位；")]),t._v(" "),v("li",[t._v("若无就绪就继续查询；")])])]),t._v(" "),v("li",[t._v("传送\n"),v("ul",[v("li",[t._v("外设就绪后，寻址数据口")]),t._v(" "),v("li",[t._v("输入：IN指令从数据端口读入数据")]),t._v(" "),v("li",[t._v("输出：OUT指令向数据端口输出数据")])])])]),t._v(" "),v("h3",{attrs:{id:"三、中断传送方式-int-21h"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三、中断传送方式-int-21h"}},[t._v("#")]),t._v(" 三、中断传送方式：int 21h")]),t._v(" "),v("p",[t._v("1、用中断服务子程序实现")]),t._v(" "),v("p",[t._v("2、特点：")]),t._v(" "),v("ul",[v("li",[t._v("是一种效率较高的程序传送方式；")]),t._v(" "),v("li",[t._v("中断服务程序是预先设计好的；")]),t._v(" "),v("li",[t._v("CPU在每条指令周期后采样中断请求输入信号；")]),t._v(" "),v("li",[t._v("外设需要传输数据时，主动向CPU提出中断请求，提高实时性；")]),t._v(" "),v("li",[t._v("外设准备数据和CPU执行程序并行工作，提高CPU效率；")]),t._v(" "),v("li",[t._v("每传输一次数据就要中断一次，需保护断点和现场；")]),t._v(" "),v("li",[t._v("需要中断控制器8259芯片；")]),t._v(" "),v("li",[t._v("适合少量数据、中慢速外设的数据传送，如鼠标、键盘。")])]),t._v(" "),v("p",[t._v("3、中断过程：")]),t._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("1、中断请求（外设）\n2、中断响应（CPU）\n3、关中断（CPU）\n4、断点保护（CPU）\n5、识别中断源（硬件/软件）\n6、现场保护（用户）\n7、中断服务：数据交换\n8、恢复现场（用户）\n9、开中断（CPU/用户）\n10、中断fan'hui\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br"),v("span",{staticClass:"line-number"},[t._v("3")]),v("br"),v("span",{staticClass:"line-number"},[t._v("4")]),v("br"),v("span",{staticClass:"line-number"},[t._v("5")]),v("br"),v("span",{staticClass:"line-number"},[t._v("6")]),v("br"),v("span",{staticClass:"line-number"},[t._v("7")]),v("br"),v("span",{staticClass:"line-number"},[t._v("8")]),v("br"),v("span",{staticClass:"line-number"},[t._v("9")]),v("br"),v("span",{staticClass:"line-number"},[t._v("10")]),v("br")])]),v("h3",{attrs:{id:"四、dma传送方式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#四、dma传送方式"}},[t._v("#")]),t._v(" 四、DMA传送方式")]),t._v(" "),v("p",[t._v("1、特点：")]),t._v(" "),v("ul",[v("li",[t._v("克服程序控制传输的不足")])]),t._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("外设->CPU->存储器\n外设<-CPU<-存储器\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br")])]),v("ul",[v("li",[t._v("直接存储器存取DMA：")])]),t._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("外设->存储器\n外设<-存储器\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br")])]),v("p",[t._v("DMA传送中，CPU释放总线，由DMA控制器（8237 ）管理。")]),t._v(" "),v("p",[t._v("2、DMA传送原理")]),t._v(" "),v("ul",[v("li",[t._v("CPU对DMA控制器8237进行初始化设置；")]),t._v(" "),v("li",[t._v("外设、DMAC和CPU三者通过应答信号建立联系：CPU将总线给DMAC控制；")]),t._v(" "),v("li",[t._v("DMAC控制数据在内存和外设间传送送：\n"),v("ul",[v("li",[t._v("DMA读存储器：存储器->外设")]),t._v(" "),v("li",[t._v("DMA写存储器：存储器<-外设")])])]),t._v(" "),v("li",[t._v("自动增减地址和计数，判断传送完成否。")]),t._v(" "),v("li",[t._v("传送完成后8237归还CPU总线")])]),t._v(" "),v("p",[t._v("3、DMA传送过程")]),t._v(" "),v("ul",[v("li",[t._v("外设向DMA发出请求；")]),t._v(" "),v("li",[t._v("DMAC向CPU申请总线（hold）；")]),t._v(" "),v("li",[t._v("CPU完成当前总线周期后响应（hlda），并释放总线控制权；")]),t._v(" "),v("li",[t._v("DMAC得到总线控制权，发出DMA响应信号；")]),t._v(" "),v("li",[t._v("由DMAC发出读写控制信号，控制外设与存储器之间的数据传输；")]),t._v(" "),v("li",[t._v("数据传送完成后，DMAC撤销HOLD信号；")]),t._v(" "),v("li",[t._v("CPU释放HLDA信号，并重新控制总线。")])]),t._v(" "),v("p",[t._v("总结：传送方式比较")]),t._v(" "),v("ul",[v("li",[t._v("无条件传送：慢速外设需要与CPU保持同步。")]),t._v(" "),v("li",[t._v("查询传送：简单使用，CPU效率较低。")]),t._v(" "),v("li",[t._v("中断传送：外设主动、实时性高，与CPU并行工作，CPU效率高，但每次传送需要大量额外时间开销，适用于中慢速外设。")]),t._v(" "),v("li",[t._v("DMA传送：传送过程中由专门硬件DMAC控制，不需要CPU介入，外设直接和主存进行数据传送，适合大量、快速数据传送。")])]),t._v(" "),v("h1",{attrs:{id:"可编程并行接口芯片8255a"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#可编程并行接口芯片8255a"}},[t._v("#")]),t._v(" 可编程并行接口芯片8255A")]),t._v(" "),v("h2",{attrs:{id:"并行通信"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#并行通信"}},[t._v("#")]),t._v(" 并行通信")]),t._v(" "),v("ul",[v("li",[t._v("以计算机的字长（8位、16位或32位）为传输单位，一次传送一个字长的数据。")]),t._v(" "),v("li",[t._v("适合外部设备与微机之间进行近距离、大量和快速的信息交换。")])]),t._v(" "),v("h2",{attrs:{id:"一、8255a的内部结构和引脚"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、8255a的内部结构和引脚"}},[t._v("#")]),t._v(" 一、8255A的内部结构和引脚：")]),t._v(" "),v("ul",[v("li",[t._v("3个8位端口：端口A、端口B、端口C")]),t._v(" "),v("li",[t._v("3种工作方式：方式0、方式1、方式2")]),t._v(" "),v("li",[t._v("4个端口地址：端口A、端口B、端口C、控制口，地址")]),t._v(" "),v("li",[t._v("2个控制字：\n"),v("ul",[v("li",[t._v("方式控制字：")]),t._v(" "),v("li",[t._v("C口的按位置位/复位字：")])])])]),t._v(" "),v("p",[t._v("1、与外设连接的端口")]),t._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("端口A：PA0-PA7\n\t- 常作数据端口，共能最强大，\n\t- 支持工作方式0、1、2\n端口B：PB0-PB7\n\t- 常作数据端口，支持工作方式0、1\n端口C:PC0-PC7\n\t- 可作数据、状态、和控制端口\n\t- 分两个4位、每位可独立操作\n\t- 仅支持工作方式0\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br"),v("span",{staticClass:"line-number"},[t._v("3")]),v("br"),v("span",{staticClass:"line-number"},[t._v("4")]),v("br"),v("span",{staticClass:"line-number"},[t._v("5")]),v("br"),v("span",{staticClass:"line-number"},[t._v("6")]),v("br"),v("span",{staticClass:"line-number"},[t._v("7")]),v("br"),v("span",{staticClass:"line-number"},[t._v("8")]),v("br"),v("span",{staticClass:"line-number"},[t._v("9")]),v("br")])]),v("p",[t._v("2、处理器连接的引脚")]),t._v(" "),v("ul",[v("li",[t._v("数据线：8条")]),t._v(" "),v("li",[t._v("地址线：2条，A0、A1")]),t._v(" "),v("li",[t._v("CS片选信号")]),t._v(" "),v("li",[t._v("RD读信号")]),t._v(" "),v("li",[t._v("WR写信号")]),t._v(" "),v("li",[t._v("RESET复位信号")])]),t._v(" "),v("p",[t._v("3、8255的四个端口地址")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("CS")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("A1")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("A0")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("读操作RD")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("写操作WR")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("读端口A")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("写端口A")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("读端口B")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("写端口B")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("读端口C")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("写端口C")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("非法")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("写控制口")])])])]),t._v(" "),v("h2",{attrs:{id:"二、8255a的工作方式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、8255a的工作方式"}},[t._v("#")]),t._v(" 二、8255A的工作方式")]),t._v(" "),v("p",[t._v("1、三种工作方式")]),t._v(" "),v("ul",[v("li",[t._v("方式0：基本输入输出方式\n"),v("ul",[v("li",[t._v("适用于 无条件传送和查询方式的接口电路")])])]),t._v(" "),v("li",[t._v("方式1：选通输入输出方式\n"),v("ul",[v("li",[t._v("适用于 查询方式和中断方式的接口电路")])])]),t._v(" "),v("li",[t._v("方式2：双向选通输入传送方式\n"),v("ul",[v("li",[t._v("适用于 查询方式和中断方式的接口电路")])])])]),t._v(" "),v("p",[t._v("2、方式0：基本I/O方式")]),t._v(" "),v("ul",[v("li",[t._v("通常"),v("strong",[t._v("不用联络信号或不使用固定的联络信号")]),t._v("；")]),t._v(" "),v("li",[t._v("PA、PB和两个4位PC都可以作为数据的入/出（由程序设定）；")]),t._v(" "),v("li",[t._v("方式0适于无条件传送和查询传送；")]),t._v(" "),v("li",[t._v("输入时，使用IN指令；输出时，使用OUT指令")])]),t._v(" "),v("p",[t._v("方式1：选通I/O方式")]),t._v(" "),v("ul",[v("li",[t._v("通常使用"),v("strong",[t._v("固定联络信号")]),t._v("；")]),t._v(" "),v("li",[t._v("适于查询和中断方式；")]),t._v(" "),v("li",[t._v("可以产生中断；")]),t._v(" "),v("li",[t._v("一般作为中断方式I/O")]),t._v(" "),v("li",[t._v("输入时，使用IN指令；输出时，使用OUT指令")])]),t._v(" "),v("p",[t._v("方式2：双向方式")]),t._v(" "),v("ul",[v("li",[t._v("方式2可以同时发送数据和接收数据")]),t._v(" "),v("li",[t._v("只有端口A可以工作于方式2")]),t._v(" "),v("li",[t._v("需要利用端口C的信号线")])]),t._v(" "),v("h2",{attrs:{id:"三、8255a的编程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三、8255a的编程"}},[t._v("#")]),t._v(" 三、8255A的编程")]),t._v(" "),v("p",[t._v("1、编程步骤：")]),t._v(" "),v("ul",[v("li",[t._v("根据题意明确三个端口的工作方式和方向")]),t._v(" "),v("li",[t._v("确定两个字：方式控制字、置位/复位字")]),t._v(" "),v("li",[t._v("确定4个端口地址：依次A、B、C、控制口")]),t._v(" "),v("li",[t._v("8255的初始化编程：两个字送到控制端口")]),t._v(" "),v("li",[t._v("8255的功能驱动编程。")])]),t._v(" "),v("p",[t._v("2、方式控制字格式")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D7")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("标志位")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D6")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D5")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("A口方式0")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("A口方式1")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("A口方式2")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("A口方式2")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D4")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("A口输出")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("A口输入")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D3")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC7-PC4输出")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC7-PC4输入")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D2")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("B口方式0")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("B口方式1")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D1")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("B口输出")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("B口输入")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D0")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC3-PC0输出")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC3-PC0输入")])])])]),t._v(" "),v("p",[t._v("3、C口的置位/复位字")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D7")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("标志位")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D6")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D5")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D4")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("未用")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D3")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D2")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D1")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("选择C口的位")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC0")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC1")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC2")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC3")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC4")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC5")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC6")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("PC7")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D0")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("选择的位 置 0")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("选择的位 置 1")])])])]),t._v(" "),v("h1",{attrs:{id:"串行通信基础"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#串行通信基础"}},[t._v("#")]),t._v(" 串行通信基础")]),t._v(" "),v("h2",{attrs:{id:"一、概念"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、概念"}},[t._v("#")]),t._v(" 一、概念")]),t._v(" "),v("p",[t._v("1、串行通信")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("定义：将数据以二进制位形式用一条信号线，一位一位顺序传送的方式；")])]),t._v(" "),v("li",[v("p",[t._v("特点：用于通信的线路少，适用于远距离数据传送，也常用于速度要求不高的近距离数据传送；")])]),t._v(" "),v("li",[v("p",[t._v("应用：PC系列机上有两个串行异步通信接口、键盘、鼠标与主机间采用串行数据传送；")])])]),t._v(" "),v("p",[t._v("2、异步通信")]),t._v(" "),v("ul",[v("li",[t._v("串行通信时的数据、控制和状态信息都使用同一根信号线传送；")]),t._v(" "),v("li",[t._v("收发双方必须遵守共同的通信协议（规程），才能解决传送速率、信息格式、同步、校验等问题；")]),t._v(" "),v("li",[t._v("串行异少通信以宇符为单位进行传输，其通信协议是起止式异步通信协议。")])]),t._v(" "),v("p",[t._v("协议格式：")]),t._v(" "),v("div",{staticClass:"language- line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("1位起始位：0\n8位数据位：0/1\n1位奇偶校验位：0/1\t\n\t偶校验：包括校验位在内1的个数是偶数个\n\t奇校验：包括校验位在内1的个数是及数个\n两位停止位：11\n一帧：12位\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br"),v("span",{staticClass:"line-number"},[t._v("3")]),v("br"),v("span",{staticClass:"line-number"},[t._v("4")]),v("br"),v("span",{staticClass:"line-number"},[t._v("5")]),v("br"),v("span",{staticClass:"line-number"},[t._v("6")]),v("br"),v("span",{staticClass:"line-number"},[t._v("7")]),v("br")])]),v("p",[t._v("数据传输率（比特率Bit Rate）")]),t._v(" "),v("ul",[v("li",[t._v("定义：每秒传输的二进制位数（bps）\n"),v("ul",[v("li",[t._v("单位：波特 或 bit/s")])])]),t._v(" "),v("li",[t._v("数据传输速率的倒数：每个二进制位传输的时间")]),t._v(" "),v("li",[t._v("采用二进制传输时，比特率等于波特率")]),t._v(" "),v("li",[t._v("串行异步通信的数据传输速率在50bps到9600bps之间。高达115200bps或更高。")])]),t._v(" "),v("p",[t._v("波特因子")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("接收器或发送器的频率/数据传输的波特率")])]),t._v(" "),v("li",[v("p",[t._v("在8251（可编程串行接口）芯片中有三种：1、16、64")])])]),t._v(" "),v("p",[t._v("3、同步通信")]),t._v(" "),v("ul",[v("li",[t._v("以一个数据块（帧）为传输单位，每一个数据块附加1个或2个同步字符，最后以检验字符结束。")]),t._v(" "),v("li",[t._v("同步通信的数据传输效率和传输速率较高，但硬件电路比较复杂")])]),t._v(" "),v("p",[t._v("数据格式：同步字符 8位数据 校验字符")]),t._v(" "),v("p",[t._v("4、传输制式")]),t._v(" "),v("ul",[v("li",[t._v("全双工：可双向同时通信  —> <—")]),t._v(" "),v("li",[t._v("半双工：可双向异步通信 <—>")]),t._v(" "),v("li",[t._v("单共：只可单方向通信  —>")])]),t._v(" "),v("h2",{attrs:{id:"二、通用异步接收发送器uart-8251、8250"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、通用异步接收发送器uart-8251、8250"}},[t._v("#")]),t._v(" 二、通用异步接收发送器UART（8251、8250）")]),t._v(" "),v("ul",[v("li",[t._v("串行异步通信的接口芯片")]),t._v(" "),v("li",[t._v("串行传输，需要并行到串行、串行到并行的转换，")]),t._v(" "),v("li",[t._v("按照传输协议发送和接收每个字符（或数据块）")])]),t._v(" "),v("p",[t._v("1、8250")]),t._v(" "),v("ul",[v("li",[t._v("8250实现了起止式串行异步通信协议，支持全双工通信\n"),v("ul",[v("li",[t._v("数据位为5—8位")]),t._v(" "),v("li",[t._v("停止位1、1.5或2位")]),t._v(" "),v("li",[t._v("奇偶奇偶校验1位")]),t._v(" "),v("li",[t._v("具有奇偶、帧和溢出错误检测电路")])])]),t._v(" "),v("li",[t._v("8250支持的数据传输速率为50—9600bps")])]),t._v(" "),v("h1",{attrs:{id:"控制器芯片"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#控制器芯片"}},[t._v("#")]),t._v(" 控制器芯片")]),t._v(" "),v("h2",{attrs:{id:"一、中断控制器8259a"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、中断控制器8259a"}},[t._v("#")]),t._v(" 一、中断控制器8259A")]),t._v(" "),v("ul",[v("li",[t._v("可编程中断控制器PIC")]),t._v(" "),v("li",[t._v("用于管理Intel 8086/8088、80286/80386的可屏蔽中断")]),t._v(" "),v("li",[t._v("8259A的基本功能：\n"),v("ul",[v("li",[t._v("一片8259A可以管理8级中断，可扩展至64级")]),t._v(" "),v("li",[t._v("每一级中断都可单独被屏蔽或允许")]),t._v(" "),v("li",[t._v("在中断响应周期，可提供相应的中断向量号")]),t._v(" "),v("li",[t._v("8259A有多种工作方式，可以通过编程选择")])])])]),t._v(" "),v("p",[t._v("1、内部寄存器")]),t._v(" "),v("ul",[v("li",[t._v("中断请求寄存器IRR：IR0—IR7")]),t._v(" "),v("li",[t._v("中断服务寄存器ISR：ISR0—ISR7")]),t._v(" "),v("li",[t._v("中断屏蔽寄存器IMR：IMR0—IMR7")])]),t._v(" "),v("p",[t._v("2、与处理器接口")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("A0")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("RD(低电平有效)")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("WR(低电平有效)")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("CS(低电平有效)")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("写入ICW1、OCW2和OCW3")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("写入ICW2—ICW4和OCW1")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("读IRR、ISR和查询字")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("读出IMR")])])])]),t._v(" "),v("p",[t._v("3、中断级连")]),t._v(" "),v("ul",[v("li",[t._v("8259A可以级联，一片8259A，可以级联最多8片从8259A；")]),t._v(" "),v("li",[t._v("级联时，主8259A的"),v("code",[t._v("CAS0-CAS2")]),t._v("为输出线，连至从8259A的"),v("code",[t._v("CAS0-CAS2")]),t._v("，主片给从片送上被响应的从片编号;")]),t._v(" "),v("li",[t._v("从8259A的INT，连主8259A的IR；")]),t._v(" "),v("li",[t._v("主8259A的INT线连至CPU的INTR；")]),t._v(" "),v("li",[v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("SP")]),t._v("/"),v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("EN")]),t._v("在非缓冲方式下，"),v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("SP")]),t._v("=1时，8259A是主片；"),v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("SP")]),t._v("=0时，8259A是从片。")]),t._v(" "),v("li",[t._v("地址线A0连接到各片8259上的A0口。")])]),t._v(" "),v("h2",{attrs:{id:"二、8259a的中断过程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、8259a的中断过程"}},[t._v("#")]),t._v(" 二、8259A的中断过程")]),t._v(" "),v("p",[t._v("书P409页")]),t._v(" "),v("h2",{attrs:{id:"三、8259a的工作方式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三、8259a的工作方式"}},[t._v("#")]),t._v(" 三、8259A的工作方式")]),t._v(" "),v("iframe",{attrs:{src:t.$withBase("https://wfmiss.cn/markmap/01.html"),width:"100%",height:"400",frameborder:"0",scrolling:"No",leftmargin:"0",topmargin:"0"}}),t._v(" "),v("p",[t._v("1、设置优先权方式")]),t._v(" "),v("ul",[v("li",[t._v("普通全嵌套方式")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[t._v("8259A的中断优先权顺序固定不变，从高到低依次为IR0>……>IR7")]),t._v(" "),v("li",[t._v("中断请求后，8259A响应最高优先级，ISR对应位置=1，直到中断结束，ISR的位复位=0；")]),t._v(" "),v("li",[t._v("在ISR期间，禁止同级和低级优先权的中断，但允许高级优先权中断嵌套。")])])]),t._v(" "),v("ul",[v("li",[t._v("特殊全嵌套方式")])]),t._v(" "),v("blockquote",[v("p",[t._v("CPU正在处理某一级中断时，只可对本级中断进行屏蔽，允许比它高或比它低的中断源开放。")])]),t._v(" "),v("ul",[v("li",[t._v("优先权自动循环方式")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[t._v("初始优先级顺序为IR0最高、IR7最低；")]),t._v(" "),v("li",[t._v("当某一个中断源收到服务后，它的优先级改为最低，而比它低一级的中断源为最高优先级，其他级别依次类推。")])])]),t._v(" "),v("ul",[v("li",[t._v("优先权特殊循环方式")])]),t._v(" "),v("blockquote",[v("p",[t._v("与优先级自动循环方式基本相同，不同点在于可以根据用户要求将最低优先级赋予某一中断源。")])]),t._v(" "),v("p",[t._v("2、结束中断处理方式")]),t._v(" "),v("p",[t._v("什么是8259A的中断结束？")]),t._v(" "),v("blockquote",[v("p",[t._v("8259A利用中断服务寄存器ISR判断：")]),t._v(" "),v("ul",[v("li",[t._v("某位为1，表示正在进行中断服务；")]),t._v(" "),v("li",[t._v("该位为0，就是该中断结束服务；")])])]),t._v(" "),v("p",[t._v("如何使ISR某位为0：")]),t._v(" "),v("ul",[v("li",[t._v("自动中断结束方式")])]),t._v(" "),v("blockquote",[v("p",[t._v("当前CPU执行完某一个中断请求后ISR对应=0")])]),t._v(" "),v("ul",[v("li",[t._v("一般（普通）中断结束方式")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[t._v("配合全嵌套优先权方式使用")]),t._v(" "),v("li",[t._v("当CPU往8259A发中断结束命令时，8259A就会把所有正在服务的中断优先权最高的ISR位复位。")])])]),t._v(" "),v("ul",[v("li",[t._v("特殊结束方式")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[t._v("配合循环优先权方式使用")]),t._v(" "),v("li",[t._v("CPU向8259A发送一条特殊中断结束命令，指出要清除哪个ISR位。")])])]),t._v(" "),v("p",[t._v("3、屏蔽中断源方式")]),t._v(" "),v("ul",[v("li",[t._v("普通屏蔽方式")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[v("p",[t._v("只允许高优先级的中断源请求")])]),t._v(" "),v("li",[v("p",[t._v("不允许同级别或低级别的中断源")])])])]),t._v(" "),v("ul",[v("li",[t._v("特殊屏蔽方式")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[t._v("将IMR的Di位置1，使用ISR的Di位置0")]),t._v(" "),v("li",[t._v("只对本级中断进行屏蔽")])])]),t._v(" "),v("p",[t._v("4、中断请求方式")]),t._v(" "),v("ul",[v("li",[t._v("边沿触发方式")])]),t._v(" "),v("blockquote",[v("p",[t._v("中断请求输入出现的上升沿作为中断请求信号。不能跳变。")])]),t._v(" "),v("ul",[v("li",[t._v("电平触发方式")])]),t._v(" "),v("blockquote",[v("p",[t._v("中断请求端的高电平是有效的中断请求信号。响应后，必须撤销信号。")])]),t._v(" "),v("ul",[v("li",[t._v("中断查询方式")])]),t._v(" "),v("blockquote",[v("p",[t._v("IF=0（关中断），查询IR0—IR7有无中断请求。")])]),t._v(" "),v("p",[t._v("5、数据线连接方式")]),t._v(" "),v("ul",[v("li",[t._v("缓冲方式")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[t._v("8259A的数据线需加缓冲器（驱动器）予以驱动")]),t._v(" "),v("li",[t._v("多片级联的系统")])])]),t._v(" "),v("ul",[v("li",[t._v("非缓冲方式")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("SP")]),t._v("/"),v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("EN")]),t._v("引脚为输入端")]),t._v(" "),v("li",[t._v("8259直接和数据线相连")]),t._v(" "),v("li",[t._v("用于单片，引脚接高电平")]),t._v(" "),v("li",[t._v("级联时，由于引脚确定是主片（高）或从片（低）")])])]),t._v(" "),v("h2",{attrs:{id:"四、8259a的编程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#四、8259a的编程"}},[t._v("#")]),t._v(" 四、8259A的编程")]),t._v(" "),v("h3",{attrs:{id:"初始化编程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#初始化编程"}},[t._v("#")]),t._v(" 初始化编程")]),t._v(" "),v("ul",[v("li",[t._v("8259A开始工作前，必须进行初始化编程")]),t._v(" "),v("li",[t._v("给8259A写入初始化命令字ICW。")])]),t._v(" "),v("p",[t._v("1、初始化命令字ICW")]),t._v(" "),v("ul",[v("li",[t._v("初始化命令字ICW最多有4个；")]),t._v(" "),v("li",[t._v("必须按照ICW1-ICW4的顺序写入；")]),t._v(" "),v("li",[t._v("ICW1和ICW2是必须送的；")]),t._v(" "),v("li",[t._v("ICW3用于级联；")]),t._v(" "),v("li",[t._v("ICW4用于8088/8086")])]),t._v(" "),v("p",[v("strong",[t._v("ICW1")])]),t._v(" "),v("ul",[v("li",[t._v("LTIM：触发方式")]),t._v(" "),v("li",[t._v("ADI：服务程序间隔")]),t._v(" "),v("li",[t._v("A0=0")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("位")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D7")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D6")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D5")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D4")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D3（LTIM）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D2（ADI）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D1（SNGL）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D0（IC4）")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("X")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("X")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("X")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("功能")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("未用")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("未用")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("未用")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("边沿触发")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("间隔为8")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("多片使用")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("不需要ICW4")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("X")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("X")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("X")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("功能")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("未用")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("未用")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("未用")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("电平触发")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("间隔为4")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("单片使用")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("需要ICW4")])])])]),t._v(" "),v("p",[v("strong",[t._v("ICW2")])]),t._v(" "),v("ul",[v("li",[t._v("A0=1")]),t._v(" "),v("li",[t._v("D7-D3：由用户决定（中断类型号高5位）")]),t._v(" "),v("li",[t._v("D2-D0：由中断源引脚程序决定（IR0-IR7）")])]),t._v(" "),v("p",[v("strong",[t._v("ICW3")])]),t._v(" "),v("ul",[v("li",[t._v("主8259A")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[t._v("A0=1")]),t._v(" "),v("li",[t._v("D7-D0：为1的位（该引脚有从片）；为0的位（该引脚未接有从片）")])])]),t._v(" "),v("ul",[v("li",[t._v("从8259A")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[t._v("A0=1")]),t._v(" "),v("li",[t._v("D7-D3：未用（默认按0）")]),t._v(" "),v("li",[t._v("D2-D0：接主片的（IR0-IR7分别对应000-111）")])])]),t._v(" "),v("p",[v("strong",[t._v("ICW4")])]),t._v(" "),v("ul",[v("li",[t._v("A0=1；")]),t._v(" "),v("li",[t._v("D7-D5：未用（默认为0）；")]),t._v(" "),v("li",[t._v("SFNM：嵌套方式选择；BUF：方式选择；M/S：主从选择；AEDI：结束方式；UPM：系统选择；")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("位")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D4（SFNM）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D3（BUF）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D2（M/S）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D1（AEDI）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D0（UPM）")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("功能")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("普通全嵌套")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("非缓冲方式")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("本片为从片")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("正常EOI")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("8080/8085")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("功能")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("特殊全嵌套")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("缓冲方式")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("本片为主片")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("自动EOI")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("8086/8088")])])])]),t._v(" "),v("p",[t._v("2、操作命令字OCW")]),t._v(" "),v("ul",[v("li",[t._v("8259A工作期间，可以接受操作命令字OCW；")]),t._v(" "),v("li",[t._v("OCW共有三个：OCW1-OCW3；")]),t._v(" "),v("li",[t._v("写入时没有顺序要求，需要哪个OCW就写入那个OCW；")])]),t._v(" "),v("p",[v("strong",[t._v("中断屏蔽操作字：OCW1")])]),t._v(" "),v("ul",[v("li",[t._v("A0=1，写入奇地址")]),t._v(" "),v("li",[t._v("内容写入中断屏蔽寄存器IMR")]),t._v(" "),v("li",[t._v("Mi对应IRi，为 1 禁止IRi中断、为 0 允许IRi中断；")])]),t._v(" "),v("p",[v("strong",[t._v("优先级循环和中断结束命令操作字：OCW2")])]),t._v(" "),v("ul",[v("li",[t._v("A0=0，写入偶地址")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D7（R）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D6（SL）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D5（EOI）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("清除优先级自动循环命令")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("普通EOI方式")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("无操作")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("特殊EOI方式")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("设置优先级自动循环命令")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("自动循环普通EOI方式")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("设置优先权命令")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("自动循环特殊EOI方式")])])])]),t._v(" "),v("ul",[v("li",[t._v("D4、D3为 0（标志位）")]),t._v(" "),v("li",[t._v("D2-D0：分别对应IR0-IR7")])]),t._v(" "),v("p",[v("strong",[t._v("设置特殊屏蔽方式命令字：OCW3")])]),t._v(" "),v("ul",[v("li",[t._v("A0=0，写入偶地址")]),t._v(" "),v("li",[t._v("D7为 0")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D6（ESMM）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("不允许特殊屏蔽方式")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("允许特殊屏蔽方式")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D5（SMM）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("撤销特殊屏蔽方式")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("设置特殊屏蔽方式")])])])]),t._v(" "),v("ul",[v("li",[t._v("D4=0，D3=1（标志位）")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D2（P）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("非查询命令")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("查询命令")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D1（RR）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("不发读命令")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("发读命令")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D0（RIS）")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("读IRR")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("读ISR")])])])]),t._v(" "),v("h1",{attrs:{id:"定时-计数控制器8253"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#定时-计数控制器8253"}},[t._v("#")]),t._v(" 定时/计数控制器8253")]),t._v(" "),v("h2",{attrs:{id:"一、定时-计数器原理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、定时-计数器原理"}},[t._v("#")]),t._v(" 一、定时/计数器原理")]),t._v(" "),v("ul",[v("li",[t._v("定时器：由计数电路构成，通过记录高精度晶振脉冲信号的个数，输出准确的时间间隔。")]),t._v(" "),v("li",[t._v("计数器：计数电路如果记录外设提供的具有一定随机性的脉冲信号时，它主要反映脉冲的个数。")]),t._v(" "),v("li",[t._v("均采用减一计数的倒计数原理，每过一个clk周期计算器减一。")])]),t._v(" "),v("p",[v("strong",[t._v("软件延时")])]),t._v(" "),v("ul",[v("li",[t._v("利用CPU执行一个延时程序实现；")]),t._v(" "),v("li",[t._v("不用硬件，但占用CPU时间、定时精度不高，随系统主频改变。")])]),t._v(" "),v("p",[v("strong",[t._v("可编程的硬件定时")])]),t._v(" "),v("ul",[v("li",[t._v("软件硬件结合、可编程定时芯片")]),t._v(" "),v("li",[t._v("能够输出多种控制信号")])]),t._v(" "),v("h2",{attrs:{id:"二、8253的内部结构和引脚"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、8253的内部结构和引脚"}},[t._v("#")]),t._v(" 二、8253的内部结构和引脚")]),t._v(" "),v("p",[t._v("1、原理")]),t._v(" "),v("ul",[v("li",[t._v("2种计数制：按二进制或BCD码计数")]),t._v(" "),v("li",[t._v("3个独立的16位计数器")]),t._v(" "),v("li",[t._v("4个端口地址")]),t._v(" "),v("li",[t._v("6种工作方式")])]),t._v(" "),v("p",[t._v("2、结构")]),t._v(" "),v("p",[t._v("书P418")]),t._v(" "),v("p",[t._v("3、引脚")]),t._v(" "),v("ul",[v("li",[t._v("CLK：时钟输入信号（Fclk，Tclk）")]),t._v(" "),v("li",[t._v("GATE：们控输入信号\n"),v("ul",[v("li",[t._v("控制计数器是否计数")]),t._v(" "),v("li",[t._v("两种：电平控制和上升沿控制")])])]),t._v(" "),v("li",[t._v("OUT：计数器输出信号\n"),v("ul",[v("li",[t._v("当计数值减为0，OUT引脚上产生一个输出信号。（Fout，Tout）")])])])]),t._v(" "),v("p",[t._v("4、与处理器接口")]),t._v(" "),v("ul",[v("li",[t._v("数据线：8位")]),t._v(" "),v("li",[t._v("地址线：2位（A0、A1）")]),t._v(" "),v("li",[v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("CS")]),t._v("片选")]),t._v(" "),v("li",[v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("RD")]),t._v("读信号")]),t._v(" "),v("li",[v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("WR")]),t._v("写信号")])]),t._v(" "),v("p",[t._v("5、8253的I/O地址：4个")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("CS")])]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("RD")])]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[v("span",{staticStyle:{"text-decoration":"overline"}},[t._v("WR")])]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("A1")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("A0")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("对计数器 0 设置计数初值")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("对计数器 1 设置计数初值")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("对计数器 2 设置计数初值")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("设置控制字到控制口")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("从计数器 0 读出计数值")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("从计数器 1 读出计数值")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("从计数器 2 读出计数值")])])])]),t._v(" "),v("h2",{attrs:{id:"三、8253的工作方式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三、8253的工作方式"}},[t._v("#")]),t._v(" 三、8253的工作方式")]),t._v(" "),v("p",[t._v("8253有6种工作方式，由方式控制字确定")]),t._v(" "),v("p",[t._v("1、工作方式类型：")]),t._v(" "),v("ul",[v("li",[v("p",[t._v("方式0：计数结束中断")])]),t._v(" "),v("li",[v("p",[t._v("方式1：可编程单稳脉冲")])]),t._v(" "),v("li",[v("p",[t._v("方式2：频率发生器（分频器）")])]),t._v(" "),v("li",[v("p",[t._v("方式3：方波发生器")])]),t._v(" "),v("li",[v("p",[t._v("方式4：软件触发选通信号")])]),t._v(" "),v("li",[v("p",[t._v("方式5：硬件触发选通信号")])])]),t._v(" "),v("p",[t._v("2、工作方式特点：")]),t._v(" "),v("ul",[v("li",[t._v("只有方式 2 和 3 为自动装入初值循环计数；")]),t._v(" "),v("li",[t._v("方式 1 和 5 由外部gate上升沿触发启动计数器；")]),t._v(" "),v("li",[t._v("方式 0 - 4 为计数值启动后，开始计数；")]),t._v(" "),v("li",[t._v("方式 1 的输出波形全为负电平：Tout=N*Tclk")]),t._v(" "),v("li",[t._v("方式 2 的输出波形：Tout中有一个Tclk的负电平")]),t._v(" "),v("li",[t._v("方式 3 初值N为偶数：N/2*Tout的高（低）电平\n"),v("ul",[v("li",[t._v("初值N为奇数：（N+1）/2*Tout的高（低）电平")])])])]),t._v(" "),v("h2",{attrs:{id:"四、8253的编程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#四、8253的编程"}},[t._v("#")]),t._v(" 四、8253的编程")]),t._v(" "),v("p",[t._v("1、确定8253的4个端口地址；")]),t._v(" "),v("p",[t._v("2、确定CPU写入8253的初值和计数制（二进制0-65535、BCD码0-9999）")]),t._v(" "),v("p",[t._v("3、确定CPU写入8253的方式控制字")]),t._v(" "),v("p",[t._v("4、编写8253的初始化程序段")]),t._v(" "),v("p",[v("strong",[t._v("方式控制字")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D7")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D6")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("选择计数器0")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("选择计数器1")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("选择计数器2")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("非法")])])])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("D5")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("D4")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("功能")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("计数器锁存命令")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("只读写低字节")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("只读写高字节")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("先读写低字节，再读写高字节")])])])]),t._v(" "),v("ul",[v("li",[t._v("D3-D1：对应6种工作方式")]),t._v(" "),v("li",[t._v("D0：为0选择二进制计数方式；为1选择BCD计数方式")])]),t._v(" "),v("p",[v("strong",[t._v("初值计算")])]),t._v(" "),v("p",[t._v("初值（N）=Tout/Tclk=Fclk/Fout")]),t._v(" "),v("blockquote",[v("p",[t._v("Tclk=1/Fclk")])]),t._v(" "),v("h1",{attrs:{id:"dma控制器8237a"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#dma控制器8237a"}},[t._v("#")]),t._v(" DMA控制器8237A")]),t._v(" "),v("h2",{attrs:{id:"一、8237-dma概述"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、8237-dma概述"}},[t._v("#")]),t._v(" 一、8237 DMA概述")]),t._v(" "),v("p",[t._v("为了提高数据传送效率，提出了DMA数据传送控制方式，由DMA控制器取代CPU，获得CPUD总线控制权，实现 "),v("strong",[t._v("内存与外设")]),t._v(" 或 "),v("strong",[t._v("内存的不同区域之间")]),t._v(" 或者 "),v("strong",[t._v("外设与外设")]),t._v(" 大量数据的快速传送。")]),t._v(" "),v("p",[t._v("用于：图像的显示、磁盘的存取，磁盘间的数据传送等。")]),t._v(" "),v("h2",{attrs:{id:"二、8237-dma数据传送的工作过程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、8237-dma数据传送的工作过程"}},[t._v("#")]),t._v(" 二、8237 DMA数据传送的工作过程")]),t._v(" "),v("p",[t._v("书：p427(图8-16)")]),t._v(" "),v("ul",[v("li",[t._v("接收从外设发出的DMA请求，并向CPU发出总线请求信号。")]),t._v(" "),v("li",[t._v("当CPU响应请求，发出HLDA后，DMA控制器能接管对总线的控制，进入DMA操作方式。")]),t._v(" "),v("li",[t._v("发出存储器地址，确定数据传送的地址单元，并能自动修改地址指针。")]),t._v(" "),v("li",[t._v("识别数据传送的方向，发出读或写控制信号。")]),t._v(" "),v("li",[t._v("确定传送数据的个数，判断传送是否结束。")]),t._v(" "),v("li",[t._v("发出DMA操作的结束信号。")])]),t._v(" "),v("p",[v("strong",[t._v("需要注意的是：")])]),t._v(" "),v("blockquote",[v("p",[t._v("在内存与外设之间进行DMA传送期间，DMAC控制器只是输出地址及控制信号，而数据传送是直接在内存和外设端口之间进行的，并不是经过DMAC。")])]),t._v(" "),v("h2",{attrs:{id:"三、dma控制器8237a"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三、dma控制器8237a"}},[t._v("#")]),t._v(" 三、DMA控制器8237A")]),t._v(" "),v("ul",[v("li",[t._v("每个8237A芯片由4个DMA通道，即有4个DMA控制器；")]),t._v(" "),v("li",[t._v("每个DMA通道具有不同的优先权；")]),t._v(" "),v("li",[t._v("每个DMA通道可以分别允许和禁止")]),t._v(" "),v("li",[t._v("每个DMA通道有四种工作方式")]),t._v(" "),v("li",[t._v("一次传输的最大长度可达64KB")])]),t._v(" "),v("p",[t._v("1、8237A的工作方式")]),t._v(" "),v("ul",[v("li",[t._v("DMA传送方式")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[t._v("单字节传送方式")]),t._v(" "),v("li",[t._v("数据块传送方式")]),t._v(" "),v("li",[t._v("请求级联方式")]),t._v(" "),v("li",[t._v("级联方式")])])]),t._v(" "),v("ul",[v("li",[t._v("DMA传送类型")])]),t._v(" "),v("blockquote",[v("ul",[v("li",[t._v("DMA读：读存储器—>外设")]),t._v(" "),v("li",[t._v("DMA写：外设—>存储器")]),t._v(" "),v("li",[t._v("DMA检验：")])])])])}),[],!1,null,null,null);e.default=l.exports}}]);